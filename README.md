# 车道系统日志收集工具

这是一个用于从车道系统收集日志文件的Python工具。它通过SSH连接到目标系统，下载指定的日志文件，并将它们压缩成zip格式。该工具提供命令行和图形界面两种使用方式，并支持打包成Windows可执行文件。

## 功能特点

- 通过SSH安全连接到车道系统
- 支持多个日志文件的批量下载
- 显示下载进度条
- 自动压缩下载的日志文件
- 详细的日志记录
- 可配置的连接参数和日志路径
- 提供命令行和图形界面两种使用方式
- 支持打包成Windows独立可执行文件

## 使用方法

### Windows可执行文件版本

1. 直接运行`车道系统日志收集工具.exe`
2. 在图形界面中配置并使用

### 从源码运行

#### 安装要求

- Python 3.6+
- 依赖包（见requirements.txt）

#### 安装步骤

1. 克隆或下载本项目
2. 安装依赖包：
   ```bash
   pip install -r requirements.txt
   ```

#### 图形界面版本

1. 运行图形界面程序：
   ```bash
   python log_collector_gui.py
   ```

2. 在图形界面中：
   - 填写SSH连接信息（主机地址、端口、用户名、密码）
   - 点击"添加路径"按钮添加需要收集的日志文件路径
   - 点击"开始收集"按钮开始收集日志
   - 程序会自动保存配置信息到config.yaml文件

#### 命令行版本

1. 配置好 `config.yaml` 文件：

```yaml
ssh:
  host: "192.168.1.100"  # 修改为实际的车道系统IP地址
  port: 22               # SSH端口，一般默认22
  username: "admin"      # SSH用户名
  password: "password"   # SSH密码

log_paths:              # 需要收集的日志文件路径列表
  - "/path/to/log1"
  - "/path/to/log2"
```

2. 运行命令行程序：
   ```bash
   python log_collector.py
   ```

## 打包说明

### 在Windows上打包成可执行文件

1. 安装所需依赖：
   ```bash
   pip install -r requirements.txt
   ```

2. 生成应用图标：
   ```bash
   python create_icon.py
   ```

3. 运行打包脚本：
   ```bash
   python build.py
   ```

4. 打包完成后，可在`dist`目录下找到可执行文件

## 输出说明

- 下载的日志文件将保存在 `collected_logs/时间戳` 目录下
- 压缩文件将保存为 `collected_logs/时间戳.zip`
- 程序运行日志保存在 `log_collector.log`

## 图形界面功能说明

- **主机设置**：输入车道系统的IP地址和SSH端口
- **认证信息**：输入SSH连接用的用户名和密码
- **日志路径管理**：
  - 点击"添加路径"添加需要收集的日志文件路径
  - 选中路径后点击"删除选中"可删除不需要的路径
- **操作日志**：界面下方会显示操作过程的日志信息
- **进度显示**：下载过程中会显示进度条
- **配置保存**：程序会自动保存和加载最后使用的配置

## 注意事项

- 请确保有足够的磁盘空间存储日志文件
- 确保SSH连接参数正确
- 确保有权限访问目标日志文件
- 图形界面版本会自动保存配置，下次启动时会自动加载上次的配置
- Windows可执行文件版本无需安装Python环境 